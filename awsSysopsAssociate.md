# SysOps Associate Exam


## EC2 
- Changed the Instance type of an EC2 and did not lose any data, watched the memory increase via CLI
- Placement Groups ( Cluster, Spread, Partition )
  - How to add an instance to one on creation
- Termination on shutdown and Termination protection
  - We saw how via the CLI, even if termination protection is enabled via console, it is ignored via CLI
- InstanceLimitExceeded Error: resolution -> launch instance in different region or ask for increase of region
- InsufficientInstanceCapacity: resolution -> wait few min, try diff instance type, reduce request number
- Instance Terminates Immediately: 1. EBS volume limit. 2. EBS snapshot corrupt. 3. EBS volume is encrypted/no permissions. 4. AMI image is missing a part. Solution -> show 'state transition reason' from the gear icon
- EC2 SSH Issues:
  - Unprotected Pem File while logging in: resolution -> chmod 400 AWSCourse.pem , was probably 755 permissions
  - Permission Denied: resolution -> check user name 'ec2-user' for linux AMI
  - Completely Times out: resolution -> security group rules are wrong because SSH port rule is not enabled
- EC2 Instance Launch Types:
  - On Demand: billed per second after first minute - no committment
  - Reserved: up to 75% discount compared to on-demand. 1-3 year reservation periods
  - Convertible: up to 54% discount, can change EC2 instance type
  - Scheduled Reserved Instances: launch within time window
  - Spot Instances: up to 90% discount compared to On-Demand. 2 minute notification warning when spot goes above bid. resilient workloads, big data
  - Dedicated Instances: no other customers share your server. no con
  - Dedicated Hosts: book entire physical server - 3 yr reservation period, more expensive. BYOL - strong regulatory needs. 
- EC2 Instance Types
  - R - Ram ( in memory cache )
  - C - CPU ( compute / db )
  - M - Medium ( general / webapp )
  - I - I/O ( instance storage / databases ) 
  - G - GPU ( video rendering / machine learning )
  - T2/T3 burstable - credit based
  - T2/T3 unlimited 
- Creating AMI's from existing EC2 Instances
- Cross Account AMI Copy
  - Edit AMI properties - public / private ( certain AWS acct #s )
  - Copied AMI's give ownership to the copier
  - You can copy an AMI from a running EC2 instance as a workaround
- Elastic IP ( doesnt change when you stop/start instance )
  - Costs money if you are not using the instance
  - Useful to mask the failure of an instance by rapidly remapping the address to another instance in your acct
  - Max of 5 Elastic IP's
- AWS Provided Cloudwatch Metrics
  - Basic (default) - 5 minute interval
  - Detailed ( paid ) - 1 minute interval
- Cloudwatch Custom metrics
  - Default basic resolution 1 min
  - High resolution up to 1 second
  - Includes RAM monitoring
- EC2 included Metrics
  - CPU
  - Network
  - Status Check
    - Instance Status - EC2 VM
    - System Status - Check underlying Hardware
  - Disk: Read/Write
  - RAM ( NOT INCLUDED IN AWS EC2 metrics )
- Detailed Monitoring
  - Metrics at 1 minute frequency
  - Additional costs
- Custom Cloudwatch Metrics Walkthrough
  - Requires installing some scripts via YUM on Amazon Linux 2 AMI
  - Download / install monitoring ZIP file via CURL
  - Unzip file to folder and use IAM Role permissions to access 
  - Create EC2 instance role creates
  - CloudwatchFullAccess choose and give a name
  - Right click on instance, attach Role above
  - Install crontab
  - Wait 15 min for RAM to be pushed
  - Go to cloudwatch > Metrics > Linux System > InstanceID > MemoryUtilization
- By default, no logs from EC2 to Cloudwatch
  - Run the Cloudwatch Logs Agent on your EC2 Instance
  - Make sure IAM permissions are correct
  - Configure IAM Role - needs "logs: *" 
  - sudo yum install -y awslogs on EC2 instance
  - edit the awslogs.conf and awscli.conf ( set the region )
  - sudo service awslogs start
  - sudo systemctl start awslogsd
  - sudo systemtcl enable awslogsd.service
